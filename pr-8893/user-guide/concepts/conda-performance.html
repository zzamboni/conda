

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conda performance &mdash; conda 4.7.5.post40+b1c0b56 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/conda-logo.png"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Conda for data scientists" href="data-science.html" />
    <link rel="prev" title="Installing with conda" href="installing-with-conda.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> conda
          

          
          </a>

          
            
            
              <div class="version">
                4.7.5.post40+b1c0b56
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Concepts</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="packages.html">Conda packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="pkg-specs.html">Conda package specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="channels.html">Conda channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="environments.html">Conda environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing-with-conda.html">Installing with conda</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Conda performance</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-a-package-is-installed">How a package is installed</a></li>
<li class="toctree-l4"><a class="reference internal" href="#improving-conda-performance">Improving conda performance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="data-science.html">Conda for data scientists</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Getting started with conda</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks/index.html">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cheatsheet.html">Cheat sheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Conda configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Conda Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../commands.html">Command reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">conda</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User guide</a> &raquo;</li>
        
          <li><a href="index.html">Concepts</a> &raquo;</li>
        
      <li>Conda performance</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user-guide/concepts/conda-performance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="conda-performance">
<h1>Conda performance<a class="headerlink" href="#conda-performance" title="Permalink to this headline">¶</a></h1>
<p>Conda's performance can be affected by a variety of things.
Unlike many package managers, Anaconda’s repositories generally
don’t filter or remove old packages from the index. This allows old
environments to be easily recreated. However, it does mean that the
index metadata is always growing, and thus conda becomes slower as the
number of packages increases.</p>
<div class="section" id="how-a-package-is-installed">
<h2>How a package is installed<a class="headerlink" href="#how-a-package-is-installed" title="Permalink to this headline">¶</a></h2>
<p>While you are waiting, conda is doing a lot of work installing the
packages. At any point along these steps, performance issues may arise.</p>
<p>Conda follows these steps when installing a package:</p>
<ol class="arabic simple">
<li>Downloading and processing index metadata</li>
<li>Reducing the index</li>
<li>Expressing the package data and constraints as a SAT problem</li>
<li>Running the solver</li>
<li>Downloading and extracting packages</li>
<li>Verifying package contents</li>
<li>Linking packages from package cache into environments</li>
</ol>
<p>Therefore, if you're experiencing a slowdown, evaluate the following questions
to identify potential causes:</p>
<ul class="simple">
<li>Are you creating a new environment or installing into an existing one?</li>
<li>Does your environment have pip-installed dependencies in it?</li>
<li>What channels are you using?</li>
<li>What packages are you installing?</li>
<li>Is the channel metadata sane?</li>
<li>Are channels interacting in bad ways?</li>
</ul>
</div>
<div class="section" id="improving-conda-performance">
<h2>Improving conda performance<a class="headerlink" href="#improving-conda-performance" title="Permalink to this headline">¶</a></h2>
<p>To address these challenges, you can move packages to archive
channels and follow the methods below to present conda with a smaller, simpler view than
all available packages.</p>
<p>To speed up conda, we offer the following recommendations.</p>
<dl class="docutils">
<dt>Are you:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>Using conda-forge?</dt>
<dd><ul class="first last">
<li>Use conda-metachannel to reduce conda’s problem size.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Using bioconda?</dt>
<dd><ul class="first last">
<li>Use conda-metachannel to reduce conda’s problem size.</li>
<li><a class="reference external" href="https://github.com/bioconda/bioconda-recipes/issues/13774">Read more about docker images</a>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Specifying very broad package specs?</dt>
<dd><ul class="first last">
<li>Be more specific. Letting conda filter more candidates makes it faster.
For example, instead of <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, we recommend <code class="docutils literal notranslate"><span class="pre">numpy=1.15</span></code> or, even better, <code class="docutils literal notranslate"><span class="pre">numpy=1.15.4</span></code>.</li>
<li>If you are using R, instead of specifying only <code class="docutils literal notranslate"><span class="pre">r-essentials</span></code>, specify <code class="docutils literal notranslate"><span class="pre">r-base=3.5</span> <span class="pre">r-essentials</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Feeling frustrated with “verifying transaction” and also feeling lucky?</dt>
<dd><ul class="first last">
<li>Run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">–set</span> <span class="pre">safety_checks</span> <span class="pre">disabled</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Getting strange mixtures of defaults and conda-forge?</dt>
<dd><ul class="first last">
<li>Run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span> <span class="pre">–set</span> <span class="pre">channel_priority</span> <span class="pre">strict</span></code>.</li>
<li>This also makes things go faster by eliminating possible mixed solutions.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Observing that an Anaconda or Miniconda installation is getting slower over time?</dt>
<dd><ul class="first last">
<li>Create a fresh environment. As environments grow, they become harder
and harder to solve. Working with small, dedicated environments can
be much faster.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="section" id="set-strict-channel-priority">
<h3>Set strict channel priority<a class="headerlink" href="#set-strict-channel-priority" title="Permalink to this headline">¶</a></h3>
<p>Setting strict channel priority makes it so that if a package exists on
a channel, conda will ignore all packages with the same name on lower
priority channels.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/strict-disabled.png"><img alt="../../_images/strict-disabled.png" src="../../_images/strict-disabled.png" style="width: 50%;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../_images/strict-enabled.png"><img alt="../../_images/strict-enabled.png" src="../../_images/strict-enabled.png" style="width: 50%;" /></a>
</div>
<p>This can dramatically reduce package search space and reduces the use of
improperly constrained packages.</p>
<p>One thing to consider is that setting strict channel priority may make
environments unsatisfiable. Learn more about <a class="reference internal" href="../tasks/manage-channels.html#strict"><span class="std std-ref">Strict channel priority</span></a>.</p>
</div>
<div class="section" id="reduce-the-index">
<h3>Reduce the index<a class="headerlink" href="#reduce-the-index" title="Permalink to this headline">¶</a></h3>
<p>One option for speeding up conda is to reduce the index. It's likely that
your repodata contains package data that is not used in the solving stage.
Filtering out unnecessary packages before solving can save time.
Reducing the index takes specs and reduces the problem size so that the
SAT doesn’t have as much work to do.</p>
<p>Additionally, it is beneficial to be as specific as possible in your package
specifications. Listing a version and build string for each of your specs can
dramatically reduce the number of packages that are considered when solving.</p>
<blockquote>
<div><dl class="docutils">
<dt>Reducing the index:</dt>
<dd><ul class="first last simple">
<li>Reduces unnecessary input into generating solver clauses.</li>
<li>Reduces solve complexity.</li>
<li>Prefers newer packages that apply constraints.</li>
</ul>
</dd>
</dl>
<p>Read more on <a href="#id1"><span class="problematic" id="id2">`</span></a>Understanding and Improving Conda's Performance</p>
</div></blockquote>
<p>&lt;<a class="reference external" href="https://www.anaconda.com/understanding-and-improving-condas-performance/">https://www.anaconda.com/understanding-and-improving-condas-performance/</a>&gt;`_.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="data-science.html" class="btn btn-neutral float-right" title="Conda for data scientists" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing-with-conda.html" class="btn btn-neutral float-left" title="Installing with conda" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Continuum Analytics

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-11', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>


</body>
</html>